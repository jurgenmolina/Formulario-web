<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login</title>
	<link rel="stylesheet"  href="css/styles.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>
<body>

	<form action="https://ServidorTest.carlos-reneren7.repl.co/login" method="post">
		<section class="formulario-login">
			<h5>Inicio de Sesión</h5>
			<input class="controls" type="text" placeholder="Usuario" id="user">
			<input class="controls" type="password"  placeholder="Contraseña" id="password">
			<input class="buttons" type="submit" value="Ingresar" onclick="loadDoc()" href="dashboard.html" id="Logear">
		<p>¿No tienes una cuenta? <a href="register.html">Registrate!</a></p>
		</section>
	</form>

	<script>
		function loadDoc() {
		  let url = "https://ServidorTest.carlos-reneren7.repl.co/login"
		  let formData = new FormData();
		  let vuser = document.getElementById("user").value;
		  let vpassword = document.getElementById("password").value;

		  //alert (vuser+":"+vpassword);
		  formData.append("user", vuser);
		  formData.append("password", vpassword);
		   
		  const xhttp = new XMLHttpRequest();

		  xhttp.onreadystatechange = function() {
		    //console.log(this.responseText);
		    if (this.readyState == 4 && this.status == 200) {
		        //console.log(this.status);
		        localStorage.setItem('user', vuser);
		        window.location.href = "dashboard.html";
		    }else{
		        console.log("error..");
		    }
		  };

		  xhttp.open("POST", url);
		  xhttp.send(formData);
		}
</script>
	
</body>
</html>
